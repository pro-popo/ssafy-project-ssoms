{"remainingRequest":"D:\\s03p31b303\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\s03p31b303\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\s03p31b303\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\s03p31b303\\frontend\\src\\components\\main\\ReportModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\s03p31b303\\frontend\\src\\components\\main\\ReportModal.vue","mtime":1605858570517},{"path":"D:\\s03p31b303\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7CmltcG9ydCBqc1BERiBmcm9tICdqc3BkZic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVwb3J0TW9kYWwiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0b1BkZjogW1tdLCBbXV0sCiAgICAgIGVsZW1zOiBbW3sKICAgICAgICB0ZXh0OiAiT3JhY2xlIERCIFN0YXR1cyIsCiAgICAgICAgdmFsdWU6ICJvcmFjbGVTdGF0dXMiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiU2NoZW1hIFN0YXR1cyIsCiAgICAgICAgdmFsdWU6ICJhbGxTY2hlbWFTdGF0aWNzIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIlRvcCBRdWVyeSIsCiAgICAgICAgdmFsdWU6ICJhbGxTY2hlbWFUb3BRdWVyeSIKICAgICAgfV0sIFt7CiAgICAgICAgdGV4dDogIlNjaGVtYSBTdGF0dXMiLAogICAgICAgIHZhbHVlOiAicGFzdE1vbml0ZXJpbmciCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiVG9wIFF1ZXJ5IiwKICAgICAgICB2YWx1ZTogIlNjaGVtYVF1ZXJ5cyIKICAgICAgfV1dCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbWFrZWJ0bjogZnVuY3Rpb24gbWFrZWJ0bigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICdSZWFsVGltZU1vbml0b3JpbmcnKSB7CiAgICAgICAgdGhpcy50b1BkZlswXS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBpZiAoZWxlbWVudCA9PSAiYWxsU2NoZW1hVG9wUXVlcnkiKSB7CiAgICAgICAgICAgIF90aGlzLm1ha2VQREYoW2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxTY2hlbWFUb3BRdWVyeVRhYmxlJykuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGRdLCBlbGVtZW50KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLm1ha2VQREYoW2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQpXSwgZWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUubmFtZSA9PSAnU2NoZW1hTW9uaXRvcmluZycpIHsKICAgICAgICB0aGlzLnRvUGRmWzFdLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIGlmIChlbGVtZW50ID09ICJwYXN0TW9uaXRlcmluZyIpIHsKICAgICAgICAgICAgX3RoaXMubWFrZVBERihbZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1NjaGVtYVdob2xlJyksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdTY2hlbWFEZXRhaWwnKV0sIGVsZW1lbnQpOwogICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50ID09ICJTY2hlbWFRdWVyeXMiKSB7CiAgICAgICAgICAgIF90aGlzLm1ha2VQREYoW2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdTY2hlbWFRdWVyeXMnKS5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZF0sIGVsZW1lbnQpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgbWFrZVBERjogZnVuY3Rpb24gbWFrZVBERihlbGUsIG5hbWUpIHsKICAgICAgd2luZG93Lmh0bWwyY2FudmFzID0gaHRtbDJjYW52YXM7CiAgICAgIHZhciBwZGYgPSBuZXcganNQREYoJ3AnLCAnbW0nLCAnYTQnKTsKICAgICAgaWYgKCFlbGUpIHJldHVybiBmYWxzZTsKICAgICAgdmFyIGlkeCA9IDA7CiAgICAgIHZhciBiZWZvcmVoZWlnaHQgPSAwOwogICAgICBlbGUuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBjYW52YXMgPSBwZGYuY2FudmFzOwogICAgICAgIHZhciBwYWdlV2lkdGggPSAyMTA7IC8v7LqU67KE7IqkIOuEiOu5hCBtbQoKICAgICAgICBjYW52YXMud2lkdGggPSBwYWdlV2lkdGg7CiAgICAgICAgdmFyIHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDsgLy8g7IWA66CJ7Yq47ZWcIOyalOyGjOydmCBweCDrhIjruYQKCiAgICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0OyAvLyDshYDroIntirjtlZwg7JqU7IaM7J2YIHB4IOuGkuydtAoKICAgICAgICB2YXIgaW1nSGVpZ2h0ID0gcGFnZVdpZHRoICogaGVpZ2h0IC8gd2lkdGg7IC8vIOydtOuvuOyngCDrhpLsnbTqsJIgcHggdG8gbW0g67OA7ZmYCgogICAgICAgIGh0bWwyY2FudmFzKGVsZW1lbnQpLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykgewogICAgICAgICAgdmFyIGltZ0RhdGEgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsKICAgICAgICAgIHBkZi5hZGRJbWFnZShpbWdEYXRhLCAncG5nJywgMCwgYmVmb3JlaGVpZ2h0LCBwYWdlV2lkdGgsIGltZ0hlaWdodCwgJ2ltYWdlJyArIFN0cmluZyhpZHgpLCAnU0xPVycpOwoKICAgICAgICAgIGlmIChpZHggPT0gZWxlLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBwZGYuc2F2ZShkYXRlLmdldEZ1bGxZZWFyKCkgKyAiXyIgKyBkYXRlLmdldE1vbnRoKCkgKyAiXyIgKyBkYXRlLmdldERheSgpICsgIl8iICsgZGF0ZS5nZXRIb3VycygpICsgIl8iICsgZGF0ZS5nZXRNaW51dGVzKCkgKyAiXyIgKyBuYW1lICsgIi5wZGYiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZHgrKzsKICAgICAgICAgIGJlZm9yZWhlaWdodCArPSBpbWdIZWlnaHQ7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuJGVtaXQoJ2tpbGwtbW9kYWwnKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7fQp9Ow=="},{"version":3,"sources":["ReportModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <span class=\"headline\">PDF 저장</span>\r\n    </v-card-title>\r\n    <v-card-text>\r\n      <h3>출력 항목 선택</h3>\r\n      <v-container>\r\n        <v-row>\r\n          <small>*현재 화면을 기준으로 캡쳐됩니다.</small>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col cols=\"12\">\r\n            <v-select\r\n              v-model=\"toPdf[0]\"\r\n              :items=\"elems[0]\"\r\n              chips\r\n              multiple\r\n              v-if=\"$route.name == 'RealTimeMonitoring'\"\r\n              outlined\r\n            ></v-select>\r\n            <v-select\r\n              v-model=\"toPdf[1]\"\r\n              :items=\"elems[1]\"\r\n              chips\r\n              multiple\r\n              v-if=\"$route.name == 'SchemaMonitoring'\"\r\n              outlined\r\n            ></v-select>\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n      <small>*indicates required field</small>\r\n    </v-card-text>\r\n    <v-card-actions>\r\n      <v-spacer></v-spacer>\r\n      <v-btn color=\"blue darken-1\" text @click=\"$emit('kill-modal')\">\r\n        닫기\r\n      </v-btn>\r\n      <v-btn color=\"blue darken-1\" text @click=\"makebtn\">\r\n        저장\r\n      </v-btn>\r\n    </v-card-actions>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport html2canvas from 'html2canvas';\r\nimport jsPDF from 'jspdf';\r\n\r\nexport default {\r\n  name: \"ReportModal\",\r\n  data() {\r\n    return {\r\n      toPdf: [[], []],\r\n      elems: [\r\n                [\r\n                    {text: \"Oracle DB Status\", value: \"oracleStatus\"},\r\n                    {text: \"Schema Status\", value: \"allSchemaStatics\"},\r\n                    {text: \"Top Query\", value: \"allSchemaTopQuery\"}\r\n                ],\r\n                [\r\n                    {text: \"Schema Status\", value:\"pastMonitering\"},\r\n                    {text: \"Top Query\", value:\"SchemaQuerys\"}\r\n                ]\r\n            ],\r\n    };\r\n  },\r\n  methods: {\r\n      makebtn(){\r\n          if(this.$route.name == 'RealTimeMonitoring'){\r\n              this.toPdf[0].forEach(element => {\r\n                if (element == \"allSchemaTopQuery\"){\r\n                    this.makePDF([document.getElementById('allSchemaTopQueryTable').firstElementChild.firstElementChild], element)\r\n                }else{\r\n                    this.makePDF([document.getElementById(element)], element)\r\n                }\r\n              });\r\n          }else if(this.$route.name == 'SchemaMonitoring'){\r\n              this.toPdf[1].forEach(element => {\r\n              if(element == \"pastMonitering\"){\r\n                this.makePDF([document.getElementById('SchemaWhole'), document.getElementById('SchemaDetail')], element)\r\n              }else if(element == \"SchemaQuerys\"){\r\n                this.makePDF([document.getElementById('SchemaQuerys').firstElementChild.firstElementChild], element)\r\n              }\r\n            });\r\n          }\r\n          \r\n      },\r\n      makePDF(ele, name) {\r\n\t\t\twindow.html2canvas = html2canvas\r\n            let pdf = new jsPDF('p', 'mm', 'a4');\r\n            \r\n\t\t\tif(!ele)\r\n\t\t\t\treturn false\r\n            let idx = 0;\r\n            let beforeheight = 0;\r\n            ele.forEach(element => {\r\n                let canvas = pdf.canvas\r\n                const pageWidth = 210 //캔버스 너비 mm\r\n                canvas.width = pageWidth\r\n                let width = element.offsetWidth // 셀렉트한 요소의 px 너비\r\n                let height = element.offsetHeight // 셀렉트한 요소의 px 높이\r\n                let imgHeight = pageWidth * height/width // 이미지 높이값 px to mm 변환\r\n                html2canvas(element).then(canvas => {\r\n                    let imgData = canvas.toDataURL('image/png');\r\n                    pdf.addImage(imgData, 'png', 0, beforeheight, pageWidth, imgHeight, 'image'+String(idx), 'SLOW');\r\n                    if(idx == ele.length - 1){\r\n                        let date = new Date();\r\n                        pdf.save( date.getFullYear()+\"_\"+date.getMonth()+\"_\"+date.getDay()+\"_\"+date.getHours()+\"_\"+date.getMinutes()+\"_\"+name+\".pdf\")\r\n                    }\r\n                    idx++;\r\n                    beforeheight += imgHeight;\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                });\r\n          });\r\n            this.$emit('kill-modal')\r\n\t\t},\r\n  },\r\n  mounted() {\r\n    \r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":"src/components/main"}]}