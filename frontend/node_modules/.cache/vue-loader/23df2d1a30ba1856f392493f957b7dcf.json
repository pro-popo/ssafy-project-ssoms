{"remainingRequest":"D:\\s03p31b303\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\s03p31b303\\frontend\\src\\components\\main\\ReportModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\s03p31b303\\frontend\\src\\components\\main\\ReportModal.vue","mtime":1605454471601},{"path":"D:\\s03p31b303\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnOw0KaW1wb3J0IGpzUERGIGZyb20gJ2pzcGRmJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUmVwb3J0TW9kYWwiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0aXRsZTogIiIsDQogICAgICB0b1BkZjogW10sDQogICAgICB0aXRsZXNfa29yOiBbIuyDgeyEuCIsICLsoITssrQiLCAi7Iqk7YKk66eI67OEIl0sDQogICAgICBlbGVtczogWw0KICAgICAgICAgIHt0ZXh0OiAiT3JhY2xlIERCIFN0YXR1cyIsIHZhbHVlOiAib3JhY2xlU3RhdHVzIn0sDQogICAgICAgICAge3RleHQ6ICJTY2hlbWEgU3RhdHVzIiwgdmFsdWU6ICJhbGxTY2hlbWFTdGF0aWNzIn0sDQogICAgICAgICAge3RleHQ6ICJUb3AgUXVlcnkiLCB2YWx1ZTogImFsbFNjaGVtYVRvcFF1ZXJ5In0sDQogICAgICBdDQogICAgfTsNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBUeXBlOiBOdW1iZXINCiAgfSwNCiAgbWV0aG9kczogew0KICAgICAgbWFrZWJ0bigpew0KICAgICAgICAgIHRoaXMudG9QZGYuZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gImFsbFNjaGVtYVRvcFF1ZXJ5Iil7DQogICAgICAgICAgICAgICAgdGhpcy5tYWtlUERGKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxTY2hlbWFUb3BRdWVyeVRhYmxlJykuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQsIGVsZW1lbnQpDQogICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMubWFrZVBERihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50KSwgZWxlbWVudCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgfSwNCiAgICAgIG1ha2VQREYoZWxlLCBuYW1lKSB7DQoJCQl3aW5kb3cuaHRtbDJjYW52YXMgPSBodG1sMmNhbnZhcw0KCQkJbGV0IHBkZiA9IG5ldyBqc1BERigncCcsICdtbScsICdhNCcpDQogICAgICAgICAgICBsZXQgY2FudmFzID0gcGRmLmNhbnZhcw0KICAgICAgICAgICAgY29uc3QgcGFnZVdpZHRoID0gMjEwIC8v7LqU67KE7IqkIOuEiOu5hCBtbQ0KCQkJY2FudmFzLndpZHRoID0gcGFnZVdpZHRoDQoJCQlsZXQgd2lkdGggPSBlbGUub2Zmc2V0V2lkdGggLy8g7IWA66CJ7Yq47ZWcIOyalOyGjOydmCBweCDrhIjruYQNCgkJCWxldCBoZWlnaHQgPSBlbGUub2Zmc2V0SGVpZ2h0IC8vIOyFgOugie2KuO2VnCDsmpTshozsnZggcHgg64aS7J20DQogICAgICAgICAgICBsZXQgaW1nSGVpZ2h0ID0gcGFnZVdpZHRoICogaGVpZ2h0L3dpZHRoIC8vIOydtOuvuOyngCDrhpLsnbTqsJIgcHggdG8gbW0g67OA7ZmYDQogICAgICAgICAgICANCgkJCWlmKCFlbGUpew0KCQkJCWNvbnNvbGUud2FybiggJyBpcyBub3QgZXhpc3QuJykNCgkJCQlyZXR1cm4gZmFsc2UNCgkJCX0NCiAgICAgICAgICAgIGh0bWwyY2FudmFzKGVsZSwge30pLnRoZW4oY2FudmFzID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSAwDQogICAgICAgICAgICAgICAgY29uc3QgaW1nRGF0YSA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpDQogICAgICAgICAgICAgICAgcGRmLmFkZEltYWdlKGltZ0RhdGEsICdwbmcnLCAwLCBwb3NpdGlvbiwgcGFnZVdpZHRoLCBpbWdIZWlnaHQsIHVuZGVmaW5lZCwgJ3Nsb3cnKQ0KICAgICAgICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBwZGYuc2F2ZSggZGF0ZS5nZXRGdWxsWWVhcigpKyJfIitkYXRlLmdldE1vbnRoKCkrIl8iK2RhdGUuZ2V0RGF5KCkrIl8iK2RhdGUuZ2V0SG91cnMoKSsiXyIrZGF0ZS5nZXRNaW51dGVzKCkrIl8iK25hbWUrIi5wZGYiKQ0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2tpbGxNb2RhbCcpDQoJCX0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy50aXRsZSA9IHRoaXMudGl0bGVzX2tvclt0aGlzLlR5cGVdOw0KICB9DQp9Ow0K"},{"version":3,"sources":["ReportModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReportModal.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <span class=\"headline\">PDF 저장 - {{ title }}</span>\r\n    </v-card-title>\r\n    <v-card-text>\r\n      <h3>출력 항목 선택</h3>\r\n      <div v-if=\"Type=1\"></div>\r\n      <v-container>\r\n        <v-row>\r\n          <v-col cols=\"12\">\r\n            <v-select\r\n              v-model=\"toPdf\"\r\n              :items=\"elems\"\r\n              chips\r\n              multiple\r\n              outlined\r\n            ></v-select>\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n      <small>*indicates required field</small>\r\n    </v-card-text>\r\n    <v-card-actions>\r\n      <v-spacer></v-spacer>\r\n      <v-btn color=\"blue darken-1\" text @click=\"$emit('killModal')\">\r\n        닫기\r\n      </v-btn>\r\n      <v-btn color=\"blue darken-1\" text @click=\"makebtn\">\r\n        저장\r\n      </v-btn>\r\n    </v-card-actions>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport html2canvas from 'html2canvas';\r\nimport jsPDF from 'jspdf';\r\n\r\nexport default {\r\n  name: \"ReportModal\",\r\n  data() {\r\n    return {\r\n      title: \"\",\r\n      toPdf: [],\r\n      titles_kor: [\"상세\", \"전체\", \"스키마별\"],\r\n      elems: [\r\n          {text: \"Oracle DB Status\", value: \"oracleStatus\"},\r\n          {text: \"Schema Status\", value: \"allSchemaStatics\"},\r\n          {text: \"Top Query\", value: \"allSchemaTopQuery\"},\r\n      ]\r\n    };\r\n  },\r\n  props: {\r\n    Type: Number\r\n  },\r\n  methods: {\r\n      makebtn(){\r\n          this.toPdf.forEach(element => {\r\n              if (element == \"allSchemaTopQuery\"){\r\n                this.makePDF(document.getElementById('allSchemaTopQueryTable').firstElementChild.firstElementChild, element)\r\n              }else{\r\n                this.makePDF(document.getElementById(element), element)\r\n              }\r\n          });\r\n      },\r\n      makePDF(ele, name) {\r\n\t\t\twindow.html2canvas = html2canvas\r\n\t\t\tlet pdf = new jsPDF('p', 'mm', 'a4')\r\n            let canvas = pdf.canvas\r\n            const pageWidth = 210 //캔버스 너비 mm\r\n\t\t\tcanvas.width = pageWidth\r\n\t\t\tlet width = ele.offsetWidth // 셀렉트한 요소의 px 너비\r\n\t\t\tlet height = ele.offsetHeight // 셀렉트한 요소의 px 높이\r\n            let imgHeight = pageWidth * height/width // 이미지 높이값 px to mm 변환\r\n            \r\n\t\t\tif(!ele){\r\n\t\t\t\tconsole.warn( ' is not exist.')\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n            html2canvas(ele, {}).then(canvas => {\r\n                let position = 0\r\n                const imgData = canvas.toDataURL('image/png')\r\n                pdf.addImage(imgData, 'png', 0, position, pageWidth, imgHeight, undefined, 'slow')\r\n                let date = new Date();\r\n                pdf.save( date.getFullYear()+\"_\"+date.getMonth()+\"_\"+date.getDay()+\"_\"+date.getHours()+\"_\"+date.getMinutes()+\"_\"+name+\".pdf\")\r\n            }).catch(err => {\r\n                console.log(err)\r\n            });\r\n            this.$emit('killModal')\r\n\t\t},\r\n  },\r\n  mounted() {\r\n    this.title = this.titles_kor[this.Type];\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}