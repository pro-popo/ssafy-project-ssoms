{"remainingRequest":"D:\\s03p31b303\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\s03p31b303\\frontend\\src\\components\\main\\ReportModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\s03p31b303\\frontend\\src\\components\\main\\ReportModal.vue","mtime":1605858570517},{"path":"D:\\s03p31b303\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\s03p31b303\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnOw0KaW1wb3J0IGpzUERGIGZyb20gJ2pzcGRmJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUmVwb3J0TW9kYWwiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0b1BkZjogW1tdLCBbXV0sDQogICAgICBlbGVtczogWw0KICAgICAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgICAgICAge3RleHQ6ICJPcmFjbGUgREIgU3RhdHVzIiwgdmFsdWU6ICJvcmFjbGVTdGF0dXMifSwNCiAgICAgICAgICAgICAgICAgICAge3RleHQ6ICJTY2hlbWEgU3RhdHVzIiwgdmFsdWU6ICJhbGxTY2hlbWFTdGF0aWNzIn0sDQogICAgICAgICAgICAgICAgICAgIHt0ZXh0OiAiVG9wIFF1ZXJ5IiwgdmFsdWU6ICJhbGxTY2hlbWFUb3BRdWVyeSJ9DQogICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgICAgIHt0ZXh0OiAiU2NoZW1hIFN0YXR1cyIsIHZhbHVlOiJwYXN0TW9uaXRlcmluZyJ9LA0KICAgICAgICAgICAgICAgICAgICB7dGV4dDogIlRvcCBRdWVyeSIsIHZhbHVlOiJTY2hlbWFRdWVyeXMifQ0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgIF0sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgICAgbWFrZWJ0bigpew0KICAgICAgICAgIGlmKHRoaXMuJHJvdXRlLm5hbWUgPT0gJ1JlYWxUaW1lTW9uaXRvcmluZycpew0KICAgICAgICAgICAgICB0aGlzLnRvUGRmWzBdLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gImFsbFNjaGVtYVRvcFF1ZXJ5Iil7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVBERihbZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbFNjaGVtYVRvcFF1ZXJ5VGFibGUnKS5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZF0sIGVsZW1lbnQpDQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVBERihbZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudCldLCBlbGVtZW50KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfWVsc2UgaWYodGhpcy4kcm91dGUubmFtZSA9PSAnU2NoZW1hTW9uaXRvcmluZycpew0KICAgICAgICAgICAgICB0aGlzLnRvUGRmWzFdLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgIGlmKGVsZW1lbnQgPT0gInBhc3RNb25pdGVyaW5nIil7DQogICAgICAgICAgICAgICAgdGhpcy5tYWtlUERGKFtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnU2NoZW1hV2hvbGUnKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1NjaGVtYURldGFpbCcpXSwgZWxlbWVudCkNCiAgICAgICAgICAgICAgfWVsc2UgaWYoZWxlbWVudCA9PSAiU2NoZW1hUXVlcnlzIil7DQogICAgICAgICAgICAgICAgdGhpcy5tYWtlUERGKFtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnU2NoZW1hUXVlcnlzJykuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGRdLCBlbGVtZW50KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgICAgDQogICAgICB9LA0KICAgICAgbWFrZVBERihlbGUsIG5hbWUpIHsNCgkJCXdpbmRvdy5odG1sMmNhbnZhcyA9IGh0bWwyY2FudmFzDQogICAgICAgICAgICBsZXQgcGRmID0gbmV3IGpzUERGKCdwJywgJ21tJywgJ2E0Jyk7DQogICAgICAgICAgICANCgkJCWlmKCFlbGUpDQoJCQkJcmV0dXJuIGZhbHNlDQogICAgICAgICAgICBsZXQgaWR4ID0gMDsNCiAgICAgICAgICAgIGxldCBiZWZvcmVoZWlnaHQgPSAwOw0KICAgICAgICAgICAgZWxlLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgbGV0IGNhbnZhcyA9IHBkZi5jYW52YXMNCiAgICAgICAgICAgICAgICBjb25zdCBwYWdlV2lkdGggPSAyMTAgLy/supTrsoTsiqQg64SI67mEIG1tDQogICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gcGFnZVdpZHRoDQogICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCAvLyDshYDroIntirjtlZwg7JqU7IaM7J2YIHB4IOuEiOu5hA0KICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodCAvLyDshYDroIntirjtlZwg7JqU7IaM7J2YIHB4IOuGkuydtA0KICAgICAgICAgICAgICAgIGxldCBpbWdIZWlnaHQgPSBwYWdlV2lkdGggKiBoZWlnaHQvd2lkdGggLy8g7J2066+47KeAIOuGkuydtOqwkiBweCB0byBtbSDrs4DtmZgNCiAgICAgICAgICAgICAgICBodG1sMmNhbnZhcyhlbGVtZW50KS50aGVuKGNhbnZhcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbWdEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7DQogICAgICAgICAgICAgICAgICAgIHBkZi5hZGRJbWFnZShpbWdEYXRhLCAncG5nJywgMCwgYmVmb3JlaGVpZ2h0LCBwYWdlV2lkdGgsIGltZ0hlaWdodCwgJ2ltYWdlJytTdHJpbmcoaWR4KSwgJ1NMT1cnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYoaWR4ID09IGVsZS5sZW5ndGggLSAxKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBkZi5zYXZlKCBkYXRlLmdldEZ1bGxZZWFyKCkrIl8iK2RhdGUuZ2V0TW9udGgoKSsiXyIrZGF0ZS5nZXREYXkoKSsiXyIrZGF0ZS5nZXRIb3VycygpKyJfIitkYXRlLmdldE1pbnV0ZXMoKSsiXyIrbmFtZSsiLnBkZiIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWR4Kys7DQogICAgICAgICAgICAgICAgICAgIGJlZm9yZWhlaWdodCArPSBpbWdIZWlnaHQ7DQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgna2lsbC1tb2RhbCcpDQoJCX0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgDQogIH0NCn07DQo="},{"version":3,"sources":["ReportModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"ReportModal.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <span class=\"headline\">PDF 저장</span>\r\n    </v-card-title>\r\n    <v-card-text>\r\n      <h3>출력 항목 선택</h3>\r\n      <v-container>\r\n        <v-row>\r\n          <small>*현재 화면을 기준으로 캡쳐됩니다.</small>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col cols=\"12\">\r\n            <v-select\r\n              v-model=\"toPdf[0]\"\r\n              :items=\"elems[0]\"\r\n              chips\r\n              multiple\r\n              v-if=\"$route.name == 'RealTimeMonitoring'\"\r\n              outlined\r\n            ></v-select>\r\n            <v-select\r\n              v-model=\"toPdf[1]\"\r\n              :items=\"elems[1]\"\r\n              chips\r\n              multiple\r\n              v-if=\"$route.name == 'SchemaMonitoring'\"\r\n              outlined\r\n            ></v-select>\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n      <small>*indicates required field</small>\r\n    </v-card-text>\r\n    <v-card-actions>\r\n      <v-spacer></v-spacer>\r\n      <v-btn color=\"blue darken-1\" text @click=\"$emit('kill-modal')\">\r\n        닫기\r\n      </v-btn>\r\n      <v-btn color=\"blue darken-1\" text @click=\"makebtn\">\r\n        저장\r\n      </v-btn>\r\n    </v-card-actions>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport html2canvas from 'html2canvas';\r\nimport jsPDF from 'jspdf';\r\n\r\nexport default {\r\n  name: \"ReportModal\",\r\n  data() {\r\n    return {\r\n      toPdf: [[], []],\r\n      elems: [\r\n                [\r\n                    {text: \"Oracle DB Status\", value: \"oracleStatus\"},\r\n                    {text: \"Schema Status\", value: \"allSchemaStatics\"},\r\n                    {text: \"Top Query\", value: \"allSchemaTopQuery\"}\r\n                ],\r\n                [\r\n                    {text: \"Schema Status\", value:\"pastMonitering\"},\r\n                    {text: \"Top Query\", value:\"SchemaQuerys\"}\r\n                ]\r\n            ],\r\n    };\r\n  },\r\n  methods: {\r\n      makebtn(){\r\n          if(this.$route.name == 'RealTimeMonitoring'){\r\n              this.toPdf[0].forEach(element => {\r\n                if (element == \"allSchemaTopQuery\"){\r\n                    this.makePDF([document.getElementById('allSchemaTopQueryTable').firstElementChild.firstElementChild], element)\r\n                }else{\r\n                    this.makePDF([document.getElementById(element)], element)\r\n                }\r\n              });\r\n          }else if(this.$route.name == 'SchemaMonitoring'){\r\n              this.toPdf[1].forEach(element => {\r\n              if(element == \"pastMonitering\"){\r\n                this.makePDF([document.getElementById('SchemaWhole'), document.getElementById('SchemaDetail')], element)\r\n              }else if(element == \"SchemaQuerys\"){\r\n                this.makePDF([document.getElementById('SchemaQuerys').firstElementChild.firstElementChild], element)\r\n              }\r\n            });\r\n          }\r\n          \r\n      },\r\n      makePDF(ele, name) {\r\n\t\t\twindow.html2canvas = html2canvas\r\n            let pdf = new jsPDF('p', 'mm', 'a4');\r\n            \r\n\t\t\tif(!ele)\r\n\t\t\t\treturn false\r\n            let idx = 0;\r\n            let beforeheight = 0;\r\n            ele.forEach(element => {\r\n                let canvas = pdf.canvas\r\n                const pageWidth = 210 //캔버스 너비 mm\r\n                canvas.width = pageWidth\r\n                let width = element.offsetWidth // 셀렉트한 요소의 px 너비\r\n                let height = element.offsetHeight // 셀렉트한 요소의 px 높이\r\n                let imgHeight = pageWidth * height/width // 이미지 높이값 px to mm 변환\r\n                html2canvas(element).then(canvas => {\r\n                    let imgData = canvas.toDataURL('image/png');\r\n                    pdf.addImage(imgData, 'png', 0, beforeheight, pageWidth, imgHeight, 'image'+String(idx), 'SLOW');\r\n                    if(idx == ele.length - 1){\r\n                        let date = new Date();\r\n                        pdf.save( date.getFullYear()+\"_\"+date.getMonth()+\"_\"+date.getDay()+\"_\"+date.getHours()+\"_\"+date.getMinutes()+\"_\"+name+\".pdf\")\r\n                    }\r\n                    idx++;\r\n                    beforeheight += imgHeight;\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                });\r\n          });\r\n            this.$emit('kill-modal')\r\n\t\t},\r\n  },\r\n  mounted() {\r\n    \r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}